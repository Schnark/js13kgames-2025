<!DOCTYPE html>
<html><head>
<meta charset="utf-8">
<title>Edgar’s Mission</title>
<meta name="viewport" content="width=device-width">
<link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAUdQTFRFAAAAAAUAAwUEAABEAAkABggIAAwAAA4ACAsLABEACw8PAhMDEREABBUFDhISBhgIERcXCRwNFBsbDSESHh4AFh4eESQXGSEhGiMjEycZGyQkFCkbFyseHikpKioAGS8iIi0tHDEmJDExHjUpITcsKDU1IzkvKjg4JTwxLDs7Jj4zKD81Lj09KkI4MEBALEU7REQAM0REL0c+NEZGMElAMUpBNklJM0xEOEpKOUxMOk5ONlFJPFBQOVNMPVJSOlVOO1ZPPFdQQFZWWFgAPVlSQ1lZQFtVRFtbQl5YRl5eRGFbRmJdSWJiS2RkSGZhTWdnS2lkTWpmbGwAT2pqTmxob28AUm1tUG9rUnBuVHJwXHp3hoYAf5aVp6cAiqCflqmpubkAu7sArLy8rb28rb69rr6+r7+/r8C/sMDAsMHAsMHBscLCssPDGySlzQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+kIHw8ENmUf+0IAAACaSURBVDjL7dChDsJAEEXRS9NAhi8AT4JAoEgFAotAkuBIEIC5/68RW9oS2CKqSHhmxZyd3Tz8Ev5gKIB+AEnkQAEXyIMC6hW0C9/TPpEdt2CWmScAMgjcOPQD+PjNDmiKPaqeukWKrlIv7tOVnVc3Uj572LvVJehZ1SoM71Mq6yYjIgLS+cyccqElrH0dNJmMIiIYR2RAm58AD+a3/aYhBlNuAAAAAElFTkSuQmCC">
<style>
html,body{margin:0;padding:0;background:#000;color:#fff;font:22px sans-serif}#s p{line-height:1.8;text-align:center}canvas{display:block;margin:auto}button{border:none;background:transparent;font:inherit;color:inherit;cursor:pointer;transition:all 0.2s}button:hover,button:focus{transform:scale(1.2)}#i{cursor:pointer}label{position:fixed;top:0;right:0;cursor:pointer}#a,#a:checked~.off,#a:not(:checked)~.on{display:none}</style>
</head><body>
<div id="s">
<p>I’m Edgar the cat.<br>It’s already getting dark and my owner is not here.<br>He must have been kidnapped!<br>Will you help me on my mission to find him?</p>
<canvas id="i" moz-opaque></canvas>
<p><button id="p">Continue previous game</button></p>
<p><button id="n">Start new game</button></p>
</div>
<div id="g" hidden>
<canvas id="c" moz-opaque></canvas>
<label><input type="checkbox" id="a"><svg title="Turn sound off [m]" class="on" width="40" height="40" viewBox="0 0 30 30"><path fill="#fff" d="M15 8v8.55c-.94-.54-2.1-.75-3.33-.32-1.34.48-2.37 1.67-2.61 3.07a4.007 4.007 0 0 0 4.59 4.65c1.96-.31 3.35-2.11 3.35-4.1V10h2c1.1 0 2-.9 2-2s-.9-2-2-2h-2c-1.1 0-2 .9-2 2z"/></svg><svg title="Turn sound on [m]" class="off" width="40" height="40" viewBox="0 0 30 30"><path fill="#fff" d="M17 12.61V10h2c1.1 0 2-.9 2-2s-.9-2-2-2h-2c-1.1 0-2 .9-2 2v3.61l2 2zM8.12 6.56a.996.996 0 1 0-1.41 1.41l8.29 8.3v.28c-.94-.54-2.1-.75-3.33-.32-1.34.48-2.37 1.67-2.61 3.07a4.007 4.007 0 0 0 4.59 4.65c1.96-.31 3.35-2.11 3.35-4.1v-1.58l5.02 5.02a.996.996 0 1 0 1.41-1.41L8.12 6.56z"/></svg></label>
</div>
<script>
(function(){var t,s,y,b,f,B,m,C,L,q,o,r;t=function(){return{get:function(b){try{return JSON.parse(localStorage.getItem("schnark-js13k2025")||"x")}catch(c){return b}},set:function(b){try{localStorage.setItem("schnark-js13k2025",JSON.stringify(b))}catch(c){}}}}();s=function(){function b(a,e){var g,d,e=e||"sine";for(g=0;g<k.length;g++)if(k[g].osc.type===e&&k[g].t<a)return g;g=l.createOscillator();d=l.createGain();g.type=e;d.gain.value=0;g.connect(d);d.connect(l.destination);g.start();k.push({osc:g,gain:d});
return k.length-1}function c(a){var e,g;if(h&&i===2){l||(l=new j);e=l.currentTime;var d;u&&(d=e-u,a?a=a*d/20:(a=0.4-p,a=Math.max(a,-d/20),a=Math.min(a,d/20)),p+=a,p=Math.max(p,0.15),p=Math.min(p,0.65));u=e;for(e=0;e<f.length;e++){if(f[e].time===-1)g||(g=l.currentTime+0.1),f[e].time=g;d=f[e];for(var c=void 0;d.time-l.currentTime<0.3;){c=d.notes[d.pos];if(c[0][0]==="z")d.time+=c[1]*p;else{for(var a=d,m=c[0],o=d.time,s=d.key,r=d.volume,q=void 0,c=o+c[1]*p,q=0;q<m.length;q++){var w=o,x=c,t=s[m[q]],A=
r,v=b(w);k[v].osc.frequency.setValueAtTime(t,w);k[v].gain.gain.setValueAtTime(0.0010,w);k[v].gain.gain.exponentialRampToValueAtTime(A,w+0.05);k[v].gain.gain.linearRampToValueAtTime(A,x-0.05);k[v].gain.gain.exponentialRampToValueAtTime(0.0010,x);k[v].gain.gain.setValueAtTime(0,x+0.01);k[v].t=x+0.01}a.time=c}d.pos=(d.pos+1)%d.notes.length}}}}function a(){var a,e;h=!1;if(l){e=l.currentTime+0.1;for(a=0;a<k.length;a++)k[a].osc.frequency.cancelScheduledValues(e),k[a].gain.gain.cancelScheduledValues(e),
k[a].gain.gain.setValueAtTime(0,e),k[a].t=e;for(a=0;a<f.length;a++)f[a].time=-1,f[a].pos=0}}function e(a){return a.split(" ").map(function(a){var e,a=a.split(/([\^_]?[a-zA-Z][',]*)/);e=Number(a.pop()||1);return[a.filter(function(a){return a}),e]})}function g(a,e,d,g,c,i){var h;l||(l=new j);h=l.currentTime+0.01;d=h+d*g/1E3;i=b(h,["square","sawtooth","triangle","sine"][i||0]);k[i].osc.frequency.setValueAtTime(a,h);k[i].osc.frequency.linearRampToValueAtTime(a+e*g,d);k[i].gain.gain.setValueAtTime(c,h);
k[i].gain.gain.linearRampToValueAtTime(0,d);k[i].t=d}function d(a){if(i!==0)switch(a){case "cat0":g(150,30,10,20,0.15);break;case "cat1":g(100,-10,15,15,0.7,2);break;case "end1":g(100,-10,10,25,0.5);g(125,-5,20,45,0.1,1);g(40,2,20,20,1,2);g(200,-4,10,100,0.25,2);break;case "end2":g(750,-30,5,20,0.25);setTimeout(function(){g(150,30,5,20,0.25)},100);break;case "end3":g(440,-15,35,15,0.3,2);break;case "end-1":g(510,0,15,20,0.1),setTimeout(function(){g(2600,1,10,50,0.2)},80)}}var i=2,h=!1,j,l,k=[],f,
u,p=0.4;j=window.AudioContext||window.webkitAudioContext;(function(){var a={"^C":Math.pow(2,-8/12)*220,D:Math.pow(2,-7/12)*220,E:Math.pow(2,-5/12)*220,"^F":Math.pow(2,-0.25)*220,G:Math.pow(2,-2/12)*220,A:220,B:Math.pow(2,2/12)*220,c:Math.pow(2,0.25)*220,d:Math.pow(2,5/12)*220},d=["D G B2 G D ^C2 D G B d c3","B G A B A ^F G A G E ^F G4 z","B d c B A c B A G B A ^F4 G z2"],g=[],c,i;g.push(d[0],d[1],d[0],d[2],d[0]);for(c=0;c<10;c++)i=d[Math.max(0,Math.floor(Math.random()*4)-1)],Math.random()<0.3&&(i=
i.split(" ").reverse().join(" ")),g.push(i);a=[[g.join(" "),a,0.2]];f=[];for(d=0;d<a.length;d++)g=e(a[d][0]),f.push({time:-1,pos:0,notes:g,key:a[d][1],volume:a[d][2]})})();return{setMode:function(e){e!==i&&(i===2&&h&&(a(),h=!0),i=e)},start:function(){h=!0},stop:a,tick:j?c:function(){},sound:j?d:function(){}}}();y=function(){function b(c,a,e,g){this.canvas=c;this.ctx=c.getContext("2d",{alpha:!1});this.height=a;this.minWidth=e;this.maxWidth=g;this.sky=this.ctx.createRadialGradient(100,100,50,100,100,
a*0.4);this.sky.addColorStop(0,"#006");this.sky.addColorStop(1,"#004");this.hills=this.ctx.createLinearGradient(0,0,0,a);this.hills.addColorStop(0,"#abb");this.hills.addColorStop(1,"#466");this.s=1;this.resize();window.addEventListener("resize",this.resize.bind(this))}b.prototype.resize=function(){var c,a,e;this.s!==1&&this.ctx.restore();window.innerHeight<this.height?(a=window.innerHeight,e=a/this.height):(a=this.height,e=1);c=Math.min(window.innerWidth,this.maxWidth*e);c<this.minWidth*e&&(e=c/this.minWidth,
a=e*this.height);this.canvas.width=c;this.canvas.height=a;this.w=c/e;this.h=a/e;this.s=e;e!==1&&(this.ctx.save(),this.ctx.scale(e,e))};b.prototype.fade=function(c){this.ctx.fillStyle="rgba(0,0,0,"+c+")";this.ctx.fillRect(0,0,this.w,this.h)};b.prototype.blockPaths=function(c,a,e,g){var d;for(d=0;d<c.length;d++)c[d].min>e||c[d].max<a||c[d].path(this.ctx,g)};b.prototype.setText=function(c){this.text=c};b.prototype.showText=function(){if(this.text)this.ctx.fillStyle="#fff",this.ctx.textAlign="center",
this.ctx.textBaseline="top",this.ctx.font="30px sans-serif",this.ctx.fillText(this.text,this.w/2,15,this.w-80/this.s)};return b}();b=function(){function b(c){var a;c[0].xc=c[0].x;c[0].yc=c[0].y;for(a=1;a<c.length;a++)if(c[a].xc===void 0)c[a].xc=(c[a-1].x+c[a].x)/2,c[a].yc=(c[a-1].y+c[a].y)/2;else if(c[a].yc===void 0)c[a].yc=c[a-1].y+(c[a-1].y-c[a-1].yc)*(c[a].xc-c[a-1].x)/(c[a-1].x-c[a-1].xc);this.points=c;this.min=c[0].x;this.max=c[c.length-1].x}b.prototype.y=function(c){for(var a=0;this.points[a+
1].x<c;)a++;var e=this.points[a].x,g=this.points[a].y,d=this.points[a+1].xc,i=this.points[a+1].yc,h=this.points[a+1].x,a=this.points[a+1].y,b;b=e+h-2*d;c=b===0?(c-e)/(h-e):(e-d+Math.sqrt(d*d-e*h+b*c))/b;return(1-c)*(1-c)*g+2*c*(1-c)*i+c*c*a};b.prototype.path=function(c){var a;for(a=0;a<this.points.length;a++)c.quadraticCurveTo(this.points[a].xc,this.points[a].yc,this.points[a].x,this.points[a].y)};b.prototype.pathBottom=function(c){var a;a=this.points.length;c.moveTo(this.points[a-1].x,this.points[a-
1].y-30);for(a-=2;a>=0;a--)c.quadraticCurveTo(this.points[a+1].xc,this.points[a+1].yc-30,this.points[a].x,this.points[a].y-30)};b.prototype.grass=function(c,a,e,g){var d,i,a=Math.max(this.min,a-2),e=Math.min(this.max,e+2);if(!(a+2>=e-2))for(a+=2;a<e-2;a+=5)i=5*Math.floor(a/5),i+=2*Math.sin(i),d=this.y(i),c.moveTo(i,d+5),c.quadraticCurveTo(i,d-10,i+1+3*Math.sin(g/300+i/200),d-13+3*Math.cos(i/100)),c.quadraticCurveTo(i,d-10,i+1.5,d+5),c.closePath()};return b}();f=function(){function b(c,a,e){this.top=
c;this.bottom=a;this.type=e;this.min=c.min;this.max=c.max}b.prototype.inside=function(c,a){var e,g;if(c<=this.min||c>=this.max)return!1;e=this.top.y(c);g=this.bottom.y(c);return a>e&&a<g&&{l:c-this.min,r:this.max-c,t:a-e,b:g-a,block:this}};b.prototype.path=function(c,a){this.type===2?this.thornyPath(c,a):(this.bottom.pathBottom(c),this.top.path(c),c.closePath(),this.type===3&&this.waterPath(c,a))};b.prototype.thornyPath=function(c,a){var e,g,d,i,b=!0,j=!0;e=this.min;g=this.top.y(e);c.moveTo(e,g);
i=this.max-this.min-20;for(i/=2*Math.round(i/10)+2;e<this.max-10-1.5*i;)e+=b?10+i:i,g=this.top.y(e),j=!j,c.lineTo(e+2*Math.sin(e/30+a/1E3),g+(j?-1:10)),b=!1;e=this.max;g=this.top.y(e);c.lineTo(e,g);b=j=!0;d=this.bottom.y(e);i=d-g-20;for(i/=2*Math.round(i/10)+2;g<d-10-1.5*i;)g+=b?10+i:i,j=!j,c.lineTo(e+(j?1:-10),g+2*Math.sin(g/30+a/1E3)),b=!1;c.lineTo(e,d);b=j=!0;i=this.max-this.min-20;for(i/=2*Math.round(i/10)+2;e>this.min+10+1.5*i;)e-=b?10+i:i,g=this.bottom.y(e),j=!j,c.lineTo(e+2*Math.cos(e/30+a/
1E3),g+(j?1:-10)),b=!1;e=this.min;g=this.bottom.y(e);c.lineTo(e,g);b=j=!0;d=this.top.y(e);i=g-d-20;for(i/=2*Math.round(i/10)+2;g>d+10+1.5*i;)g-=b?10+i:i,j=!j,c.lineTo(e+(j?-1:10),g+2*Math.cos(g/30+a/1E3)),b=!1;c.closePath()};b.prototype.waterPath=function(c,a){function e(a){c.moveTo(a-d,g.y(a-d)+2);c.quadraticCurveTo(a,g.y(a)-5,a+d,g.y(a+d)+2)}var g=this.top,d=(this.max-this.min)/5;e(this.min+d+(this.max-this.min-2*d)*(1+Math.sin(a/700))/2);e(this.min+d+(this.max-this.min-2*d)*(1+Math.sin(a/600))/
2);e(this.min+d+(this.max-this.min-2*d)*(1+Math.sin(a/500))/2);c.closePath()};b.prototype.y=function(c){return this.top.y(c)};return b}();B=function(){function b(c,a,e){this.min=c;this.max=a;this.v=e;this.x=c}b.prototype.move=function(c){this.x+=this.v*c;if(this.x>this.max)this.x=2*this.max-this.x,this.v*=-1;else if(this.x<this.min)this.x=2*this.min-this.x,this.v*=-1};b.prototype.draw=function(c,a){var e=this.x%1<0.5;c.fillStyle="#aaa";c.strokeStyle="#888";c.lineWidth=2;c.beginPath();c.rect(this.x-
40,a+15,80,25);c.moveTo(this.x-30,a+15);c.quadraticCurveTo(this.x,a+5,this.x+30,a+15);c.fill();c.beginPath();c.moveTo(this.x-40,a+15);c.lineTo(this.x-50,a);c.lineTo(this.x-30,a+15);c.moveTo(this.x+40,a+15);c.lineTo(this.x+50,a);c.lineTo(this.x+30,a+15);c.moveTo(this.x-50,a);c.lineTo(this.x-(e?40:60),a);c.moveTo(this.x+50,a);c.lineTo(this.x+(e?40:60),a);c.stroke();c.lineWidth=1;c.beginPath();c.moveTo(this.x-50,a);c.lineTo(this.x-(e?60:40),a);c.moveTo(this.x+50,a);c.lineTo(this.x+(e?60:40),a);c.stroke()};
return b}();m=function(){function f(a,e,g,d){var c=[],h;this.ground=a;this.blocks=[[],[],[],[]];for(h=0;h<e.length;h++)this.blocks[e[h].type].push(e[h]);this.droneData=g||[];this.shadows=d||[];this.min=a.min;this.max=a.max;a=this.min;e=100+50*Math.random();for(c.push({x:a,y:e});a<this.max;)a+=100+100*Math.random(),e=100+50*Math.random(),c.push({x:a,y:e});this.hills=new b(c)}function c(a,e,g){var d;e<2||(d=e/4,a.rect(-d/2,-e,d,e),a.save(),a.translate(-d*0.2,5-e),a.rotate(-0.3+g),c(a,e*0.6,g),a.restore(),
a.save(),a.translate(d*0.2,5-e),a.rotate(0.4+g),c(a,e*0.7,g),a.restore())}f.prototype.run=function(a,e,g){function d(a){var e;for(e=0;e<n.drones.length;e++)n.drones[e].move(a);k=b.move(q.left,q.right,q.jump,a)}function c(p){var m=0,z,o;n.intro||(z=f||k?0:Math.abs(b.vx)>0.1||Math.abs(b.vy)>0.15?-1:1,s.tick(z));if(j)if(m=p-j,!f&&!k){a:{for(z=m;z>50;)if(z-=50,d(50),k)break a;z&&d(z)}k&&e(k)}else(f||k===-1)&&b.move(!1,!1,!1,m);f?f=!n.drawStart(a,b,m):k?o=n.drawEnd(a,b,m,k):n.draw(a,b,m);!f&&!k&&(q.left||
q.right||q.jump)&&a.setText();a.showText();j=p;n.intro&&n.stop&&(o=!0);o?g(k):u(c)}var b,j,f,k,n=this,u=window.requestAnimationFrame||window.mozRequestAnimationFrame;this.animationTime=this.endTime=this.startTime=0;this.drones=this.droneData.map(function(a){return new B(a[0],a[1],a[2]||0.1)});f=!0;b=new L(n);u(c)};f.prototype.insideBlock=function(a,e){var g,d;for(g=0;g<this.blocks[0].length;g++)if(d=this.blocks[0][g].inside(a,e))return d;for(g=0;g<this.blocks[1].length;g++)if(d=this.blocks[1][g].inside(a,
e))return d};f.prototype.getEnd=function(a,e){var g;for(g=0;g<this.blocks[2].length;g++)if(this.blocks[2][g].inside(a,e))return 2;for(g=0;g<this.blocks[3].length;g++)if(this.blocks[3][g].inside(a,e))return 3;if(a>=this.max-140)return-1};f.prototype.getDroneEnd=function(a,e){var g;for(g=0;g<this.shadows.length;g++)if(Math.abs(this.shadows[g]-a)<60&&this.ground.y(a)-e<40)return;for(g=0;g<this.drones.length;g++)if(Math.abs(this.drones[g].x-a)<10)return 1};f.prototype.draw=function(a,e,g,d){var b,h,j;
b=(e.x0+e.x1)/2-a.w/2;b=Math.min(this.max-a.w,b);b=Math.max(0,b);h=(e.y0+e.y1)/2-a.h/3;h=Math.min(0,h);this.animationTime+=g;a.ctx.fillStyle=a.sky;a.ctx.fillRect(0,0,a.w,a.h);a.ctx.fillStyle="#aa8";a.ctx.beginPath();a.ctx.arc(100,100,55,0,2*Math.PI);a.ctx.fill();a.ctx.save();a.ctx.translate(-b/2,-0.25*h);a.ctx.fillStyle=a.hills;a.ctx.beginPath();a.ctx.moveTo(this.min,a.h);this.hills.path(a.ctx);a.ctx.lineTo(this.max,a.h);a.ctx.closePath();a.ctx.fill();a.ctx.translate(-b/2,-0.75*h);if(b>this.max-a.w-
200)g=this.ground.y(this.max-140),a.ctx.fillStyle="#100",a.ctx.beginPath(),a.ctx.rect(this.max-150,g-200,20,220),a.ctx.moveTo(this.max-190,g-170),a.ctx.lineTo(this.max-95,g-170),a.ctx.lineTo(this.max-80,g-155),a.ctx.lineTo(this.max-95,g-140),a.ctx.lineTo(this.max-190,g-140),a.ctx.closePath(),a.ctx.fill(),a.ctx.fillStyle="#aa8",a.ctx.font="20px sans-serif",a.ctx.textAlign="left",a.ctx.textBaseline="alphabetic",a.ctx.fillText(this.next,this.max-160,g-150);for(j=0;j<this.drones.length;j++)this.drones[j].draw(a.ctx,
10+h);a.ctx.fillStyle="#111";a.ctx.beginPath();for(j=0;j<this.shadows.length;j++)h=this.shadows[j],h-110>b+a.w||h+110<b||(g=this.ground.y(h),a.ctx.moveTo(h-110,this.ground.y(h-110)+30),a.ctx.bezierCurveTo(h-90,g-140,h+90,g-140,h+110,this.ground.y(h+110)+30),a.ctx.closePath());a.ctx.fill();a.ctx.fillStyle="#100";a.ctx.beginPath();for(j=0;j<this.shadows.length;j++)h=this.shadows[j],h-110>b+a.w||h+110<b||(g=this.ground.y(h),a.ctx.save(),a.ctx.translate(h-50,g+10),c(a.ctx,100,0.05*Math.sin(this.animationTime/
1500)),a.ctx.restore());a.ctx.fill();a.ctx.fillStyle="#001a00";a.ctx.beginPath();a.ctx.moveTo(this.min,a.h);this.ground.path(a.ctx);a.ctx.lineTo(this.max,a.h);a.ctx.closePath();a.blockPaths(this.blocks[0],b,b+a.w,this.animationTime);a.ctx.fill();d||e.draw(a.ctx);a.ctx.fillStyle="#001a00";a.ctx.beginPath();this.ground.grass(a.ctx,b,b+a.w,this.animationTime);for(j=0;j<this.blocks[0].length;j++)this.blocks[0][j].top.grass(a.ctx,b,b+a.w,this.animationTime);a.ctx.fill();a.ctx.fillStyle="#100";a.ctx.beginPath();
a.blockPaths(this.blocks[1],b,b+a.w,this.animationTime);a.ctx.fill();a.ctx.fillStyle="#200";a.ctx.beginPath();a.blockPaths(this.blocks[2],b,b+a.w,this.animationTime);a.ctx.fill();a.ctx.fillStyle="#002";a.ctx.beginPath();a.blockPaths(this.blocks[3],b,b+a.w,this.animationTime);a.ctx.fill();d||a.ctx.restore()};f.prototype.drawStart=function(a,e,b){this.draw(a,e,b);if(!this.intro)return this.startTime+=b,a.fade(1-this.startTime/500),this.startTime>500};f.prototype.drawEnd=function(a,e,b,d){var c;this.endTime+=
b;this.draw(a,e,b,d!==-1);b=(e.x0+e.x1)/2;c=(e.y0+e.y1)/2;switch(d){case 1:a.ctx.strokeStyle="#f00",a.ctx.lineWidth=2,a.ctx.beginPath(),a.ctx.moveTo(b,c),a.ctx.lineTo(b,50+Math.min(0,c-a.h/3)),a.ctx.stroke();case 2:a.ctx.translate(b,c+this.endTime*this.endTime/3E3);a.ctx.fillStyle="#000";for(e=0;e<100;e++)a.ctx.beginPath(),a.ctx.arc(0,(e+1)*this.endTime/180,4,0,2*Math.PI),a.ctx.fill(),a.ctx.rotate(2.4);a.ctx.restore();break;case 3:a.ctx.fillStyle="#002",a.ctx.beginPath(),a.ctx.arc(b,c,this.endTime,
0,2*Math.PI),a.ctx.fill(),e.draw(a.ctx),a.ctx.restore()}a.fade(this.endTime/1500);return this.endTime>1500};return f}();C=function(){function b(a,e,g,d,i,h){a.save();a.beginPath();a.rect(0,-80,2*e,100);a.clip();a.save();a.scale(-1,1);a.translate(-h*e,0);c(a,e,g,d-h,i);a.restore();a.translate(-h*e,0);c(a,e,g,d-h,i);a.restore()}function c(a,e,c,d,i,h){function j(a,e,b){return a+(e-a)*(1+Math.sin(2*Math.PI*b))/2}var f,k,n,u,p,m,o,q,s,r,t,y,D,B,C,w,x,E,A,v,F,G,H,I,J,K;h?b(a,e,c,d,i,h):(h=22+17*Math.sin(c),
f=e-22+17*Math.sin(c),k=f+5,n=h-5,u=(h+f)/2+e/10,p=-39.5+2*Math.sin(2*Math.PI*i)+Math.min(0,e-100),m=(f+k)/2+2+Math.sin(6*i),o=u-e/5,q=p+23,s=(n+h)/2-2-Math.sin(6*i),r=1.5*Math.sin(7*i),t=Math.sin(6*i)-12,y=h-20,D=(p- -38)/(u-h),D=D*y+p-D*u,B=r+10,C=t-10,w=j(0,n+5,d),x=Math.min(0,j(-5,5,d+0.75)),E=j(0,n+5,d+0.5),A=Math.min(0,j(-5,5,d+0.25)),v=j(k-5,e,d+0.25),F=Math.min(0,j(-5,5,d)),G=j(k-5,e,d+0.75),H=Math.min(0,j(-5,5,d+0.5)),I=j(n*0.7,n+10,d),J=j(n*0.7,n+10,d+0.5),K=j(k,k*0.3+e*0.7,d+0.25),e=j(k,
k*0.3+e*0.7,d+0.75),a.save(),a.fillStyle="#000",a.strokeStyle="#000",a.lineWidth=7,a.lineCap="round",a.lineJoin="round",a.beginPath(),a.moveTo(h,-38),a.quadraticCurveTo(u,p,f,-41),a.quadraticCurveTo(m,-29,k,-17),a.quadraticCurveTo(o,q,n,-16),a.quadraticCurveTo(s,-27,h,-38),a.fill(),a.stroke(),a.beginPath(),a.moveTo(h,-38),a.bezierCurveTo(y,D,B,C,r,t),a.moveTo(n,-16),a.quadraticCurveTo(I,-8,w,x),a.lineTo(w+2,x),a.moveTo(n+4,-16),a.quadraticCurveTo(I,-8,w,x),a.moveTo(n,-16),a.quadraticCurveTo(J,-8,
E,A),a.lineTo(E+3,A),a.moveTo(n+4,-16),a.quadraticCurveTo(J,-8,E,A),a.moveTo(k,-17),a.quadraticCurveTo(K,-8,v,F),a.lineTo(v+2,F),a.moveTo(k-4,-17),a.quadraticCurveTo(K,-8,v,F),a.moveTo(k,-17),a.quadraticCurveTo(e,-8,G,H),a.lineTo(G+3,H),a.moveTo(k-4,-17),a.quadraticCurveTo(e,-8,G,H),a.stroke(),a.translate(f-5,-31),a.rotate(0.2*Math.sin(i)-0.4*Math.sin(c)),a.beginPath(),a.moveTo(-5,-12),a.bezierCurveTo(10,-12,5,-26,15,-26),a.bezierCurveTo(25,-26,28,-18,28,-15),a.bezierCurveTo(28,-8,10,-10,5,10),a.moveTo(9,
-20),a.lineTo(15+2*Math.sin(1.5*i),-30),a.lineTo(22,-20),a.fill(),a.fillStyle="#ff0",a.beginPath(),a.arc(20,-17,2,0,2*Math.PI),a.fill(),a.restore())}return c}();L=function(){function b(a){this.level=a;this.curve0=a.ground;this.x0=140+c;this.y0=a.ground.y(this.x0);this.curve1=a.ground;this.x1=140;this.y1=a.ground.y(this.x1);this.noRotTime=this.walkPos=this.variationTime=this.jumpTime=this.turning=this.vy=this.vx=0}var c=100;b.prototype.draw=function(a){var e,b,d;e=this.x0-this.x1;b=this.y0-this.y1;
a.save();a.translate(this.x1,this.y1);d=Math.atan2(b,e);a.rotate(d);e<0&&a.scale(1,-1);C(a,Math.sqrt(e*e+b*b),-d,this.walkPos/100,this.variationTime/1E3,this.turning/200);a.restore()};b.prototype.followCurve=function(a,e,b){var d=a+b,c,h,j=!1,f=!1;if(d<this.level.min)d=this.level.min,j=!0;else if(d>this.level.max)d=this.level.max,j=!0;if(d<e.min)d=e.min,j=!1,f=!0;else if(d>e.max)d=e.max,j=!1,f=!0;c=e.y(d);if(h=this.level.insideBlock(d,c))c=h.block,b>0?c.y(c.min)>=e.y(c.min)?(e=c,d>e.max?(d=e.max,
e.y(d),j=!1,f=!0):e.y(d)):(d-=h.l,j=!0,f=!1):c.y(c.max)>=e.y(c.max)?(e=h.block,d<e.min?(d=e.min,e.y(d),j=!1,f=!0):e.y(d)):(d+=h.r,j=!0,f=!1),c=e.y(d);return{x:d,y:c,curve:f?null:e,remaining:j||f?1-Math.abs((a-d)/b):0,stop:j}};b.prototype.catchCurve=function(a,e,b,d,c){a+=b;e+=d;var h=null,f=!1,l=!1;if(a<this.level.min)a=this.level.min,f=!0;else if(a>this.level.max)a=this.level.max,f=!0;if(d=this.level.insideBlock(a,e))if(b=b<0?d.r:d.l,d.block!==c&&(b=Math.min(b,d.b)),b=Math.min(b,d.t),b===d.l?(a-=
d.l,f=!0):b===d.r?(a+=d.r,f=!0):b===d.b?(e+=d.b,l=!0):(e-=d.t,l=!0,h=d.block),f&&d.block===c)l=!0,h=d.block,e=h.y(a);if(e>=this.level.ground.y(a))f=!1,l=!0,h=this.level.ground,e=h.y(a);return{x:a,y:e,curve:h,hitSide:f,hitCurve:l}};b.prototype.swap=function(){var a,b,c;a=this.x0;b=this.y0;c=this.curve0;this.x0=this.x1;this.y0=this.y1;this.curve0=this.curve1;this.x1=a;this.y1=b;this.curve1=c};b.prototype.move=function(a,b,c,d){this.variationTime+=d;this.jumpTime=Math.max(0,this.jumpTime-d);this.noRotTime=
Math.max(0,this.noRotTime-d);if(this.turning>0){this.turning-=d;if(this.turning>=0)return;d=-this.turning;this.turning=0}this.curve0&&this.curve1?this.walk(a,b,c,d):!this.curve0&&!this.curve1?this.fly(a,b,c,d):this.slide(a,b,c,d);return this.level.getEnd(this.x0,this.y0)||this.level.getEnd(this.x1,this.y1)||this.level.getDroneEnd((this.x0+this.x1)/2,(this.y0+this.y1)/2)};b.prototype.walk=function(a,b,g,d){var i,h,f,l;if(a===b)this.vx=0;else{if(a&&this.x0>this.x1||b&&this.x0<this.x1){this.turning=
200;this.swap();this.vx=0;return}a?(this.vx-=d*2.0E-4,this.vx=Math.max(this.vx,-0.2)):(this.vx+=d*2.0E-4,this.vx=Math.min(this.vx,0.2))}this.vy=Math.min(0,this.vx*(this.y1-this.y0)/(this.x1-this.x0));this.jumpTime=0;if(g)s.sound("cat0"),this.curve1=this.curve0=null,this.jumpTime=200,this.noRotTime=Math.max(50,2*Math.abs(this.vy)/0.3*200),this.fly(a,b,g,d);else{i=this.vx*d;h=this.x0>this.x1?this.x0-this.x1+i-c:this.x0-this.x1+i+c;i>0?(h=Math.min(h,1.5*i),h=Math.max(h,0.5*i)):(h=Math.max(h,1.5*i),h=
Math.min(h,0.5*i));f=this.followCurve(this.x0,this.curve0,i);l=this.followCurve(this.x1,this.curve1,h);if(f.remaining||l.remaining)f.remaining<l.remaining?f=this.followCurve(this.x0,this.curve0,i*(1-l.remaining)):l=this.followCurve(this.x1,this.curve1,h*(1-f.remaining));this.walkPos+=Math.abs(f.x-this.x0);this.x0=f.x;this.y0=f.y;this.curve0=f.curve;this.x1=l.x;this.y1=l.y;this.curve1=l.curve;if(f.stop||l.stop)this.vx=0;else if(f.remaining)this.jumpTime=200,!this.curve0&&!this.curve1?this.fly(a,b,
g,d*f.remaining):this.slide(a,b,g,d*f.remaining)}};b.prototype.slide=function(a,b,g,d){var f;if(g)this.jumpTime=Math.max(this.jumpTime,100),this.vy-=0.3*Math.min(d,this.jumpTime)/200,this.vy=Math.max(this.vy,-1.5*0.3),this.walkPos+=d*Math.abs(this.vy);this.vy+=2.0E-4*d;this.vy=Math.min(this.vy,0.2);if(a===b||a&&this.vx>0||b&&this.vx<0)this.vx=0;else if(a)this.vx-=2.0E-4*d,this.vx=Math.max(this.vx,this.x0>this.x1?-0.1:-0.2);else if(b)this.vx+=2.0E-4*d,this.vx=Math.min(this.vx,this.x0>this.x1?0.2:0.1);
if(this.vy<0)this.curve1=this.curve0=null,this.fly(!1,!1,!1,d);else{if(Math.abs(this.y0-this.y1)>c*0.75)this.vx=0;this.curve0||(f=!0,this.swap());a=this.vx*d;b=this.vy*d;b=Math.min(b,Math.max(0,this.y0-this.y1+c));b=Math.max(b,Math.min(0,this.y0-this.y1-c));a=this.catchCurve(this.x1,this.y1,a,b,this.curve0);a.x===this.x0&&(this.x1>this.x0?a.x+=0.01:a.x-=0.01);this.x1=a.x;this.y1=a.y;if(a.hitSide)this.vx=0;if(a.hitCurve)this.vy=0;if(a.curve)this.curve1=a.curve;else{a=Math.abs(this.y0-this.y1)<=c?this.x1-
this.x0+(this.x0>this.x1?1:-1)*Math.sqrt(c*c-(this.y0-this.y1)*(this.y0-this.y1)):this.x1-this.x0;a=this.followCurve(this.x0,this.curve0,a);if(a.x===this.x1)this.x1>this.x0?this.x1+=0.01:this.x1-=0.01,this.vx=(a.x-this.x1)/d;this.walkPos+=Math.abs(a.x-this.x0);this.x0=a.x;this.y0=a.y;this.curve0=a.curve;if(a.stop){this.vx=0;a=this.x0>this.x1?this.x0-this.x1-c:this.x0-this.x1+c;a=this.catchCurve(this.x1,this.y1,a,0,this.curve0);a.x===this.x0&&(this.x1>this.x0?a.x+=0.01:a.x-=0.01);this.x1=a.x;this.y1=
a.y;if(a.hitSide)this.vx=0;if(a.hitCurve)this.vy=0;if(a.curve)this.curve1=a.curve}}f&&this.swap()}};b.prototype.fly=function(a,b,g,d){var f,h,j,l,k;f=0.2;this.jumpTime===0&&(f/=10);if(a&&this.x0>this.x1||b&&this.x0<this.x1)f/=2;f=Math.max(Math.abs(this.vx),f);if(a)this.vx-=2.0E-4*d,this.vx=Math.max(this.vx,-f);else if(b)this.vx+=2.0E-4*d,this.vx=Math.min(this.vx,f);if(g)this.vy-=0.3*Math.min(d,this.jumpTime)/200,this.vy=Math.max(this.vy,-1.5*0.3);this.vy+=2.0E-4*d;this.vy=Math.min(this.vy,0.2);a=
this.vx*d;b=this.vy*d;f=Math.atan2(this.y0-this.y1,Math.abs(this.x0-this.x1));h=(Math.atan2(b,Math.abs(a))-f)%(2*Math.PI);this.x0<this.x1&&(h=-h);h=Math.min(Math.abs(b)/c,Math.max(0,d-this.noRotTime)*7.0E-4,h);h=Math.max(-Math.abs(b)/c,-Math.max(0,d-this.noRotTime)*7.0E-4,h);f=Math.sin(h);h=Math.cos(h)-1;j=(this.x0+this.x1)/2;l=(this.y0+this.y1)/2;k=this.catchCurve(this.x0,this.y0,a+(this.x0-j)*h-(this.y0-l)*f,b+(this.x0-j)*f+(this.y0-l)*h);this.x0=k.x;this.y0=k.y;if(!g&&!this.noRotTime)this.curve0=
k.curve;if(k.hitSide)this.jumpTime=Math.max(this.jumpTime,100),this.vx=0,this.walkPos+=d*Math.abs(this.vy);if(k.hitCurve&&!this.noRotTime)this.vy=0;k=this.catchCurve(this.x1,this.y1,a+(this.x1-j)*h-(this.y1-l)*f,b+(this.x1-j)*f+(this.y1-l)*h);k.x===this.x0&&(this.x1>this.x0?k.x+=0.01:k.x-=0.01);this.x1=k.x;this.y1=k.y;if(!g&&!this.noRotTime)this.curve1=k.curve;if(k.hitSide)this.jumpTime=Math.max(this.jumpTime,100),this.vx=0;if(k.hitCurve&&!this.noRotTime)this.vy=0;if(this.curve0&&this.curve1)this.vx=
0;(this.curve0||this.curve1)&&s.sound("cat1")};return b}();q=function(){function b(a){if(!a.ctrlKey&&!a.altKey&&!a.shiftKey)switch(a.key&&a.key!=="Unidentified"?{Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight"}[a.key]||a.key:{37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight"}[a.which]){case "a":case "q":case "ArrowLeft":return"left";case "d":case "ArrowRight":return"right";case "w":case "z":case " ":case "ArrowUp":return"jump";case "m":return"audio"}}function c(c){var d=b(c);if(d==="audio"){if(c.type===
"keydown")e.checked=!e.checked,e.dispatchEvent(new Event("change")),c.preventDefault()}else d&&(a[d]=c.type==="keydown",c.preventDefault())}var a={left:!1,right:!1,jump:!1},e;e=document.getElementById("a");document.addEventListener("keydown",c);document.addEventListener("keyup",c);document.addEventListener("blur",function(){a.left=!1;a.right=!1;a.jump=!1});return a}();o=[[new m(new b([{x:0,y:600},{x:200,y:630,xc:100,yc:630},{x:400,y:600,xc:300},{x:800,y:580,xc:500},{x:1200,y:500,xc:900},{x:1500,y:400,
xc:1400},{x:1600,y:600,xc:1510},{x:1800,y:600,xc:1700},{x:2700,y:600}]),[new f(new b([{x:1500,y:400},{x:1900,y:400}]),new b([{x:1500,y:480},{x:1900,y:480}]),1),new f(new b([{x:1800,y:430},{x:1830,y:430}]),new b([{x:1800,y:630},{x:1830,y:630}]),1),new f(new b([{x:1615,y:630},{x:1785,y:630}]),new b([{x:1615,y:670},{x:1785,y:670,xc:1697,yc:850}]),3)],[],[600]),"Use \u2190/\u2192 or A/D to move."],[new m(new b([{x:0,y:600},{x:200,y:630,xc:50,yc:600},{x:400,y:620,xc:350},{x:800,y:580,xc:450},{x:1250,y:500},
{x:1400,y:550,xc:1300,yc:480},{x:3300,y:600,xc:1600}]),[new f(new b([{x:800,y:550},{x:950,y:550}]),new b([{x:800,y:620},{x:950,y:620}]),1),new f(new b([{x:1400,y:380},{x:1850,y:360,xc:1600,yc:350}]),new b([{x:1400,y:450},{x:1850,y:450}]),0),new f(new b([{x:2E3,y:230},{x:2500,y:230}]),new b([{x:2E3,y:290},{x:2500,y:290}]),1),new f(new b([{x:2050,y:240},{x:2070,y:240}]),new b([{x:2050,y:730},{x:2070,y:730}]),1),new f(new b([{x:2430,y:240},{x:2450,y:240}]),new b([{x:2430,y:730},{x:2450,y:730}]),1),new f(new b([{x:2600,
y:430},{x:2800,y:430}]),new b([{x:2600,y:490},{x:2800,y:490}]),1)]),"Use \u2191 or W or Space to jump."],[new m(new b([{x:0,y:600},{x:200,y:640},{x:400,y:610,xc:300,yc:620},{x:800,y:580,xc:600},{x:1200,y:500,xc:1E3},{x:1400,y:600,xc:1250},{x:1401,y:650},{x:1499,y:650},{x:1500,y:600},{x:2E3,y:600},{x:2001,y:620},{x:2999,y:620},{x:3E3,y:600},{x:3600,y:590}]),[new f(new b([{x:600,y:570},{x:800,y:570,xc:750,yc:520}]),new b([{x:600,y:620},{x:800,y:620,xc:700,yc:650}]),2),new f(new b([{x:1400,y:600},{x:1500,
y:600}]),new b([{x:1400,y:700},{x:1500,y:700,xc:1450,yc:800}]),3),new f(new b([{x:2E3,y:600},{x:3E3,y:600}]),new b([{x:2E3,y:650},{x:3E3,y:650,xc:2500,yc:700}]),3),new f(new b([{x:2200,y:400},{x:2700,y:400,xc:2450,yc:350}]),new b([{x:2200,y:480},{x:2700,y:480,xc:2450,yc:500}]),0),new f(new b([{x:2400,y:370},{x:2500,y:370,xc:2450,yc:320}]),new b([{x:2400,y:420},{x:2500,y:420}]),2)]),"Be careful!",[2,3]],[new m(new b([{x:0,y:550},{x:200,y:600,xc:100,yc:580},{x:400,y:570,xc:250},{x:1E3,y:600,xc:600},
{x:1700,y:600,xc:1400}]),[new f(new b([{x:700,y:250},{x:900,y:250,xc:800,yc:200}]),new b([{x:700,y:630},{x:900,y:630}]),1)]),"To climb a wall jump against it, then jump again."],[new m(new b([{x:0,y:600},{x:3600,y:600,xc:1800,yc:400}]),[],[[900,1700,0.08],[1800,3E3,0.12]],[1100,2800]),"Watch out for drones!",[1]],[new m(new b([{x:0,y:600},{x:3600,y:600,xc:1800,yc:495}]),[new f(new b([{x:600,y:550},{x:3E3,y:550}]),new b([{x:600,y:650},{x:3E3,y:650}]),2),new f(new b([{x:0,y:350},{x:300,y:400}]),new b([{x:0,
y:450},{x:300,y:500}]),0),new f(new b([{x:600,y:200},{x:1600,y:200}]),new b([{x:600,y:280},{x:1600,y:280}]),1),new f(new b([{x:2E3,y:200},{x:3E3,y:200}]),new b([{x:2E3,y:280},{x:3E3,y:280}]),1)])],[new m(new b([{x:0,y:600},{x:1E3,y:600,xc:500,yc:650},{x:2E3,y:600,xc:1500},{x:3E3,y:600,xc:2500}]),[new f(new b([{x:600,y:600},{x:700,y:600,xc:650,yc:580}]),new b([{x:600,y:650},{x:700,y:650}]),2),new f(new b([{x:1E3,y:570},{x:1100,y:570,xc:1050,yc:550}]),new b([{x:1E3,y:620},{x:1100,y:620}]),2),new f(new b([{x:1400,
y:560},{x:1500,y:560,xc:1450,yc:540}]),new b([{x:1400,y:610},{x:1500,y:610}]),2),new f(new b([{x:1800,y:570},{x:1900,y:570,xc:1850,yc:550}]),new b([{x:1800,y:620},{x:1900,y:620}]),2),new f(new b([{x:2200,y:600},{x:2300,y:600,xc:2250,yc:580}]),new b([{x:2200,y:650},{x:2300,y:650}]),2),new f(new b([{x:2600,y:600},{x:2700,y:600,xc:2650,yc:580}]),new b([{x:2600,y:650},{x:2700,y:650}]),2)],[[500,1200],[1600,2500],[1750,2650]],[850,2050])],[new m(new b([{x:0,y:600},{x:300,y:600},{x:301,y:620},{x:2999,y:620},
{x:3E3,y:600},{x:3500,y:600}]),[new f(new b([{x:300,y:600},{x:3E3,y:600}]),new b([{x:300,y:650},{x:3E3,y:650,xc:1650,yc:700}]),3),new f(new b([{x:400,y:500},{x:700,y:500}]),new b([{x:400,y:550},{x:700,y:550,xc:550,yc:600}]),0),new f(new b([{x:900,y:350},{x:1150,y:350}]),new b([{x:900,y:450},{x:1150,y:450}]),1),new f(new b([{x:1400,y:200},{x:1600,y:200,xc:1500,yc:180}]),new b([{x:1400,y:300},{x:1600,y:300,xc:1500,yc:350}]),0),new f(new b([{x:1750,y:150},{x:1850,y:150,xc:1800,yc:100}]),new b([{x:1750,
y:180},{x:1850,y:180,xc:1800,yc:230}]),2),new f(new b([{x:1750,y:0},{x:1850,y:0,xc:1800,yc:-50}]),new b([{x:1750,y:30},{x:1850,y:30,xc:1800,yc:80}]),2),new f(new b([{x:1850,y:500},{x:2E3,y:500}]),new b([{x:1850,y:600},{x:2E3,y:600}]),1),new f(new b([{x:2100,y:250},{x:2400,y:200,xc:2300,yc:200}]),new b([{x:2100,y:450},{x:2400,y:450}]),0)])],[new m(new b([{x:0,y:600},{x:260,y:600},{x:261,y:620},{x:799,y:620},{x:800,y:600},{x:1300,y:600},{x:1301,y:620},{x:1799,y:620},{x:1800,y:600},{x:2300,y:600},{x:2301,
y:620},{x:2839,y:620},{x:2840,y:600},{x:3300,y:600}]),[new f(new b([{x:260,y:600},{x:800,y:600}]),new b([{x:260,y:650},{x:800,y:650,xc:530,yc:700}]),3),new f(new b([{x:1300,y:600},{x:1800,y:600}]),new b([{x:1300,y:650},{x:1800,y:650,xc:1550,yc:700}]),3),new f(new b([{x:2300,y:600},{x:2840,y:600}]),new b([{x:2300,y:650},{x:2840,y:650,xc:2570,yc:700}]),3)],[[1100,2E3]],[1100,2E3])],[new m(new b([{x:0,y:600},{x:1E3,y:600,xc:500,yc:650},{x:1800,y:600,xc:1500},{x:2E3,y:600},{x:2001,y:630},{x:2199,y:630},
{x:2200,y:600},{x:2350,y:600},{x:2351,y:630},{x:2499,y:630},{x:2500,y:600},{x:3E3,y:600}]),[new f(new b([{x:850,y:500},{x:1050,y:500,xc:950,yc:450}]),new b([{x:850,y:630},{x:1050,y:630}]),2),new f(new b([{x:850,y:200},{x:1050,y:200}]),new b([{x:850,y:350},{x:1050,y:350,xc:950,yc:300}]),2),new f(new b([{x:1450,y:400},{x:1500,y:400}]),new b([{x:1450,y:600},{x:1500,y:600}]),2),new f(new b([{x:1450,y:120},{x:1500,y:120}]),new b([{x:1450,y:270},{x:1500,y:270}]),2),new f(new b([{x:2E3,y:600},{x:2200,y:600}]),
new b([{x:2E3,y:670},{x:2200,y:670,xc:2100,yc:690}]),3),new f(new b([{x:2350,y:600},{x:2500,y:600}]),new b([{x:2350,y:670},{x:2500,y:670,xc:2425,yc:690}]),3),new f(new b([{x:2050,y:300},{x:2450,y:300,xc:2250,yc:280}]),new b([{x:2050,y:400},{x:2450,y:400,xc:2250,yc:420}]),2)])],[new m(new b([{x:0,y:600},{x:3600,y:600,xc:1800,yc:500}]),[],[[-500,500,0.05],[300,1E3],[600,1300,0.12],[900,2400],[1400,2800],[1600,3E3,0.12],[2200,3400,0.09],[3E3,3700,0.2]],[800,2E3,2800])],[new m(new b([{x:0,y:600},{x:1E3,
y:600,xc:500,yc:550},{x:2E3,y:600,xc:1500},{x:3E3,y:600,xc:2500},{x:4E3,y:600,xc:3500},{x:5E3,y:600,xc:4500}]),[new f(new b([{x:350,y:450},{x:550,y:450,xc:450,yc:430}]),new b([{x:350,y:520},{x:550,y:520,xc:450,yc:550}]),0),new f(new b([{x:750,y:250},{x:950,y:250,xc:850,yc:230}]),new b([{x:750,y:320},{x:950,y:320,xc:850,yc:350}]),0),new f(new b([{x:1250,y:150},{x:1450,y:150,xc:1350,yc:130}]),new b([{x:1250,y:220},{x:1450,y:220,xc:1350,yc:250}]),0),new f(new b([{x:1750,y:150},{x:1950,y:150,xc:1850,
yc:130}]),new b([{x:1750,y:220},{x:1950,y:220,xc:1850,yc:250}]),0),new f(new b([{x:2350,y:150},{x:2550,y:150,xc:2450,yc:130}]),new b([{x:2350,y:220},{x:2550,y:220,xc:2450,yc:250}]),0),new f(new b([{x:2850,y:150},{x:3E3,y:150,xc:2925,yc:130}]),new b([{x:2850,y:220},{x:3E3,y:220,xc:2925,yc:250}]),0),new f(new b([{x:3350,y:150},{x:3500,y:150,xc:3425,yc:130}]),new b([{x:3350,y:220},{x:3500,y:220,xc:3425,yc:250}]),0),new f(new b([{x:3600,y:200},{x:3700,y:200}]),new b([{x:3600,y:650},{x:3700,y:650}]),2)])],
[new m(new b([{x:0,y:600},{x:1E3,y:600,xc:500,yc:550},{x:2E3,y:600,xc:1500},{x:3E3,y:600,xc:2500},{x:4E3,y:600,xc:3500},{x:5E3,y:600,xc:4500}]),[new f(new b([{x:600,y:450},{x:650,y:450}]),new b([{x:600,y:650},{x:650,y:650}]),1),new f(new b([{x:1150,y:590},{x:1330,y:600}]),new b([{x:1150,y:640},{x:1330,y:650}]),2),new f(new b([{x:1900,y:450},{x:2E3,y:450}]),new b([{x:1900,y:650},{x:2E3,y:650}]),1),new f(new b([{x:2500,y:550},{x:2700,y:550}]),new b([{x:2500,y:600},{x:2700,y:600}]),2),new f(new b([{x:3500,
y:450},{x:3550,y:450}]),new b([{x:3500,y:670},{x:3550,y:670}]),1),new f(new b([{x:4100,y:560},{x:4300,y:550}]),new b([{x:4100,y:610},{x:4300,y:600}]),2)],[[-400,5E3,0.195]]),"RUN!"]];r=function(){var f=new y(document.getElementById("i"),250,450,450),c=new m(new b([{x:0,y:210},{x:500,y:240,xc:250,yc:190}]),[]);c.intro=!0;return{setLabel:function(a){c.next=a},start:function(){c.run(f,null,function(){})},stop:function(){c.stop=!0}}}();(function(){function b(a){var c=!1;h.hints.indexOf(a)===-1&&(h.hints.push(a),
c=!0);l.indexOf(a)>-1&&(c=!0);if(c){if(a===-1){var d=Math.round(h.time/1E3),c=[];c.unshift(d%60);d=Math.floor(d/60);c.unshift(d%60);(d=Math.floor(d/60))&&c.unshift(d);for(d=1;d<c.length;d++)c[d]<10&&(c[d]="0"+c[d]);c=c.join(":");switch(h.deaths){case 0:c="You win without ever dying after "+c+"!";break;case 1:c="You win (after having died once) after "+c+"!";break;default:c="You win (after having died "+h.deaths+" times) after "+c+"!"}j[a]=c}f.setText(j[a])}s.sound("end"+a)}function c(a,c){function d(a){h.time+=
Date.now()-g;a!==-1?(h.deaths++,t.set(h),g=Date.now(),e[0].run(f,b,d)):(h.level++,t.set(h),c())}var e=o[a],g;l=e[2]||[];a===o.length-1&&l.push(-1);f.setText(e[1]);h.level=a;g=Date.now();e[0].run(f,b,d)}function a(b,d){b===o.length?d():c(b,function(){a(b+1,d)})}function e(b){if(b)h.level=0,h.deaths=0,h.time=0;r.stop();document.getElementById("s").hidden=!0;document.getElementById("g").hidden=!1;s.start();a(h.level,function(){h.level=0;h.deaths=0;h.time=0;t.set(h);f.ctx.fillText("Finally! I found my owner!",
f.w/2,200,f.w);f.ctx.fillText("Now where is my dinner?",f.w/2,250,f.w)})}var g,d,f,h,j,l,k;d=o.length;for(g=0;g<d-1;g++)o[g][0].next=g+2+"/"+d;o[d-1][0].next="End";f=new y(document.getElementById("c"),700,900,1400);h=t.get({level:0,deaths:0,time:0,hints:[-1],audio:!0});j=["","As a black cat, you can hide from drones in the shadows below trees.","Keep away from thorns.","Keep away from water."];k=document.getElementById("a");g=document.getElementById("p");d=document.getElementById("n");k.checked=h.audio;
s.setMode(h.audio?2:0);k.addEventListener("change",function(){h.audio=k.checked;s.setMode(h.audio?2:0);t.set(h)});h.level===0?(g.style.display="none",d.textContent="Start game"):(d.addEventListener("mouseenter",function(){r.setLabel("1/"+o.length)}),d.addEventListener("mouseleave",function(){r.setLabel(h.level+1+"/"+o.length)}),d.addEventListener("focus",function(){r.setLabel("1/"+o.length)}),d.addEventListener("blur",function(){r.setLabel(h.level+1+"/"+o.length)}));r.setLabel(h.level+1+"/"+o.length);
r.start();g.addEventListener("click",function(){e()});d.addEventListener("click",function(){e(!0)});document.getElementById("i").addEventListener("click",function(){e()})})()})();
</script>
</body></html>